// https://onlinegdb.com/O4T2KHtjJ
/**********************************************
 * Автор:    Халилов Н.Х.                      *
 * Дата:     10.11.2021                        *
 * Название: Каледарь в консоли                *
 ***********************************************/
#include <iostream>
#include <iomanip>
#include <fstream>
#include <time.h>
#include <string.h>

using namespace std;

int main() {
  // ofstream information("information.txt");
  ofstream calendarFile("calendar.txt");

  time_t now;
  struct tm * timeinfo;
  int year, m, m1, m2, i, j;
  const char * month[] = {
    "Январь",
    "Февраль",
    "Март",
    "Апрель",
    "Май",
    "Июнь",
    "Июль",
    "Август",
    "Сентябрь",
    "Октябрь",
    "Ноябрь",
    "Декабрь"
  };

  cout << "ГОД: ";
  cin >> year;
  time( & now);
  timeinfo = localtime( & now);

  timeinfo -> tm_year = year - 1900;

  timeinfo -> tm_mon = 0;
  bool first = true;
  m = -1;
  while (m < 12) {

    for (i = 1; i < 33; i++) {

      timeinfo -> tm_mday = i;

      mktime(timeinfo);

      if (timeinfo -> tm_mon > m) {
        
        int space =  strlen(month[timeinfo -> tm_mon])/2; 
        cout << endl << setw(31 + space) << month[timeinfo -> tm_mon];
        timeinfo -> tm_mon = timeinfo -> tm_mon + 1;
        int space1 =  strlen(month[timeinfo -> tm_mon])/2; 
        cout <<" "<< setw(31 + space) << month[timeinfo -> tm_mon];
        timeinfo -> tm_mon = timeinfo -> tm_mon + 1;
        cout <<" "<< month[timeinfo -> tm_mon]  << endl;
        cout<< "_______________________________"  << endl;
        cout << "  ВС  ПН  ВТ  СР  ЧТ  ПТ  СБ   " << endl;
        cout << "_______________________________" << endl;
        for (j = 0; j < (timeinfo -> tm_wday); j++)
          cout << " ";
        m++;
        break;
      }
      if (m == 11 && timeinfo -> tm_mon == 0) {
        m++;
        break;
      }
     
     cout << setw(4) << timeinfo -> tm_mday;

      if (timeinfo -> tm_wday == 6)
       cout << endl;
    }
  }

//     ifstream procesingCalendar("calendar.txt");
//     ofstream newCalendar("calendar.txt") ;      
//     int column1 = 1, column2 = 11,  column3 = 20;
//   for (i=0; i<116; ++i) {
//   string str;
//   getline(procesingCalendar, str);
//   if (i==column1) {
//       newCalendar << str;
//       column1 += 28;
//   } else if (i==column2) {
//       newCalendar << str;
//       column2 += 28;
//   } else if (i==column3) {
//       newCalendar << str << endl;
//       column3 += 28;
//   }
//   cout << "text["<<i<<"] = \"" << str << "\"" << endl;
//   }

  
  calendarFile.close();
//   newCalendar.close();



  return 0;
}
